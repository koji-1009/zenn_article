---
title: ""
emoji: "🐡"
type: "tech"
topics: ["android"]
published: false
---

https://zenn.dev/koji_1009/articles/28ddc9ec95d803

この記事の補助線となる「なぜAndroid 14で制限がキツくなっているのか」を、Andorid OSの制限の強化の歴史から確認します。

---

## まとめ

<WIP>

## Android 6

https://developer.android.com/about/versions/marshmallow?hl=ja

Android 6(23)は2015年10月頭にリリースされました。
コードネームは`Marshmallow`になります。

Android 4系や5系から6系に更新対応をしたことがある方は覚えがあると思うのですが、6系には多くの変更が含まれていました。
このうち、今回確認する変更は以下の2つです。

- Dozeモードとアプリ スタンバイ
- 実行時権限のリクエスト

なお、2023年中にリリースされるであろう、Android 14(34)を搭載した端末では、「targetSdkVersionが23未満のアプリがインストール不可」となります。
最近では毎年夏にtargetSdkVersionの最低条件が引き上げられるようになっています。その対応がはいる前にリリースされたアプリが存在するわけですが、この制限により、Android 6以降のtargetSdkVersionが指定されたアプリのみ、つまり2015年以降にリリースされたアプリのみが今後は運用されることになります。開発時に意識することはまずない制限ですが、ユーザーが利用する環境が大きく変わるという意味で、頭に入れておいてもよい変更かもしれません。

https://developer.android.com/about/versions/14/behavior-changes-all?hl=ja#minimum-target-api-level

### Dozeモードとアプリ スタンバイ

https://developer.android.com/training/monitoring-device-state/doze-standby?hl=ja

Dozeモードとアプリ スタンバイの2つの機能は、端末のバッテリー消費を抑えるために導入された機能です。筆者の理解では、Dozeモードは「ユーザーが利用している端末の状態を見て、端末全体で省バッテリーモードに入る」仕組み。アプリ スタンドバイは「ユーザーのアプリ使用状況を見て、アプリごとの省バッテリーモードに入る」仕組みです。

アプリ スタンドバイは、それ以前の開発環境からすると特筆するべきものがあるのですが、2023年現在からすると気になる箇所はありません。というのも、2023年現在の開発においては、アプリ スタンドバイを強く意識せずとも対応したアプリが作れるようになっているためです。

一方で、Dozeモードはそのように扱えません。**アラーム**や**通知**といった機能に影響があるため、アプリの仕様にいくつもの制約を与えるためです。Dozeモードの詳細は公式ドキュメントをじっくりと確認してもらうべきなので、ここでは、これ以降の紹介に必要なところだけ抜粋してします。

* ユーザーがデバイスを電源と接続せずに静止状態にして、画面がオフのまま一定時間が過ぎると、デバイスはDozeモードになる
* Dozeモード中はネットワークアクセスが制限されます
* Dozeモード中はバックグラウンドでのジョブ実行が制限されます

### 実行時権限のリクエスト

https://developer.android.com/training/permissions/requesting?hl=ja

## Android 7

### バックグラウンドでの最適化

https://developer.android.com/topic/performance/background-optimization?hl=ja

## Android 8

### 通知チャンネルの導入

https://developer.android.com/guide/topics/ui/notifiers/notifications?hl=ja#ManageChannels

### バックグラウンド実行制限

https://developer.android.com/about/versions/oreo/background?hl=ja

## Android 9

### バックグラウンドでのセンサーへのアクセス制限

https://developer.android.com/about/versions/pie/android-9.0-changes-all?hl=ja#bg-sensor-access

## Android 10

### バックグラウンドからのアクティビティの起動に関する制限

https://developer.android.com/guide/components/activities/background-starts?hl=ja

## Android 11

### バックグラウンドからのカスタム トーストのブロック

https://developer.android.com/about/versions/11/behavior-changes-11?hl=ja#toasts

## Android 12

### アプリ スタンバイ バケットの制限

https://developer.android.com/about/versions/12/behavior-changes-all?hl=ja#restrictive-app-standby-bucket

### おおよその現在地

https://developer.android.com/about/versions/12/behavior-changes-all?hl=ja

## Android 13

### 正確なアラームの権限

### 通知に関する実行時の権限

https://developer.android.com/about/versions/13/behavior-changes-all?hl=ja#notification-permission

## Android 14

### 正確なアラームの権限が必要なケースの明確化

---

## バッテリー消費を意識したバックグラウンド処理

https://developer.android.com/topic/libraries/architecture/workmanager?hl=ja


https://gdg-tokyo.connpass.com/event/134258/
https://drive.google.com/file/d/1eLgnzTMo6jXZgKShg0O1ZjhOcIBVGXnT/view

### バックグラウンド処理ガイド

https://developer.android.com/guide/background?hl=ja

https://developer.android.com/topic/performance/appstandby?hl=ja
