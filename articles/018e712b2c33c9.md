---
title: "Flutterã§Responsive layout gridã«å¯¾å¿œã—ãŸã„"
emoji: "ğŸ’»"
type: "tech"
topics:
  - flutter
  - materialdesign
published: true
published_at: "2021-05-03 08:56"
---

Flutter 2ã§Webã‚„Desktopã‚¢ãƒ—ãƒªã®ã‚µãƒãƒ¼ãƒˆãŒstableã«ãªã‚Šã€æ°—ã«ãªã£ã¦ãã‚‹ã®ãŒRespoinsive Layoutã§ã™ã€‚Androidã‚„iOSã§ã¯ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã®å¯¾å¿œã‚’ç¸¦ã‚„æ¨ªã®ç”»é¢å›ºå®šã«ã—ã¦ã„ãŸã‚±ãƒ¼ã‚¹ã‚‚ã‚ã£ãŸã¨æ€ã„ã¾ã™ã€‚ã—ã‹ã—ã€Webã‚„Desktopã§ã¯ã‚¢ãƒ—ãƒªã®ã‚µã‚¤ã‚ºã¯ã‚ˆã‚Šé »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚

å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®[Creating responsive and adaptive apps](https://flutter.dev/docs/development/ui/layout/adaptive-responsive)ã§ã¯ã€Youtubeã®å‹•ç”»ä»˜ãã§å®Ÿè£…ä¾‹ãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ãœã²ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

---

ã•ã¦ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®[Creating a responsive Flutter app](https://flutter.dev/docs/development/ui/layout/adaptive-responsive#creating-a-responsive-flutter-app)ã®æ®µã‚’å¼•ç”¨ã—ã¾ã™ã€‚

> # Creating a responsive Flutter app
> 
> Flutter allows you to create apps that self-adapt to the deviceâ€™s screen size and orientation.
> 
> There are two basic approaches to creating Flutter apps with responsive design:
> 
> ## Use the [LayoutBuilder](https://api.flutter.dev/flutter/widgets/LayoutBuilder-class.html) class
> From its builder property, you get a BoxConstraints object. Examine the constraintâ€™s properties to decide what to display. For example, if your maxWidth is greater than your width breakpoint, return a Scaffold object with a row that has a list on the left. If itâ€™s narrower, return a Scaffold object with a drawer containing that list. You can also adjust your display based on the deviceâ€™s height, the aspect ratio, or some other property. When the constraints change (for example, the user rotates the phone, or puts your app into a tile UI in Nougat), the build function runs.
> 
> ## Use the [MediaQuery.of()](https://api.flutter.dev/flutter/widgets/MediaQuery/of.html) method in your build functions
> This gives you the size, orientation, etc, of your current app. This is more useful if you want to make decisions based on the complete context rather than on just the size of your particular widget. Again, if you use this, then your build function automatically runs if the user somehow changes the appâ€™s size.

ã“ã®ã‚ˆã†ã« `LayoutBuilder` ã‹ `MediaQuery` ã‚’åˆ©ç”¨ã—ã€ç”»é¢ã®ãƒªãƒ“ãƒ«ãƒ‰ã‚’åˆ©ç”¨ã—ã¦å¯¾å¿œã™ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã§ã¯ã€ç”»é¢ã®æ¨ªå¹…ã«å¿œã˜ã¦"ã©ã®ã‚ˆã†ãª"ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è€ƒãˆã¦ã„ã‘ã°è‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ ã‚‚ã—ã‚‚ã‚¢ãƒ—ãƒªãŒãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ãŒæå”±ã—ã¦ã„ã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã«ä¹—ã£ã‹ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚

https://material.io/design/layout/responsive-layout-grid.html

---

ã‚³ãƒ¼ãƒ‰ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’çµ„ã‚“ã§ã„ãéš›ã€ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã«ä¹—ã£ã‹ã‚ã†ã¨ã™ã‚‹ã¨ã€Œãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã€ãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ã¾ã™ã€‚ã¨ã„ã†ã®ã‚‚ã€ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã¯ `dp` ã®æ¨ªå¹…ã§ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ™ãƒ¼ã‚¹ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ãŸã‚ã€`LayoutBuilder` ã‚„ `MediaQuery` ã§å–å¾—ã—ãŸæ¨ªå¹…ã«å¯¾ã—ã¦åˆ†å²ã‚’æ›¸ã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã§ã™ã€‚
ã—ã‹ã—ãªãŒã‚‰ã€ç”»é¢ã”ã¨ã«ç”»é¢ã®å¹…ã®å®šç¾©ã‚’æ›¸ãã®ã¯é¿ã‘ãŸã„è©±ã§ã™ã€‚ã•ã‚‰ã«ã„ãˆã°ã€ã‚¢ãƒ—ãƒªã”ã¨ã«å®šç¾©ã‚’æ›¸ãã®ã‚‚é¿ã‘ãŸã„è©±ã§ã™ã€‚ãã‚“ãªã‚ã‘ã§ `breakpoints` ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚

https://pub.dev/packages/breakpoints_mq

ãƒªãƒã‚¸ãƒˆãƒªã¯ã“ã¡ã‚‰ã€‚MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã™ã€‚

https://github.com/koji-1009/breakpoints_mq

ãªãŠã€flutter communityè£½ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚ã‚Šã¾ã™ã€‚[^1]
å€‹äººçš„ã« `BreakpointBuilder` ã®ã‚ˆã†ãªBuilderã¯ä¸è¦ã ãªã¨æ„Ÿã˜ã‚‹[^2]ã®ã§ã™ãŒã€æœ¬è³ªçš„ã«ã¯è²·ã‚ãªã„ + å®‰å¿ƒã®flutter communityè£½ãªã®ã§ã€ãŠå¥½ããªæ–¹ã‚’åˆ©ç”¨ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

https://pub.dev/packages/breakpoint

---

`breakpoints_mq` ã§ã¯ç”»é¢ã‚µã‚¤ã‚ºã‚’ãã®ã¾ã¾æ‰±ã†ãŸã‚ã®enum([`BreakpointRange`](https://github.com/koji-1009/breakpoints_mq/blob/1.1.0/lib/src/breakpoints_enum.dart#L5))ã¨ã€xsmallã‹ã‚‰xlargeã¾ã§ï¼•æ®µéšã«åŒºåˆ‡ã£ãŸenum([`BreakpointWindow`](https://github.com/koji-1009/breakpoints_mq/blob/1.1.0/lib/src/breakpoints_enum.dart#L51))ã‚’æä¾›ã—ã¾ã™ã€‚
ã¾ãŸã€ç”»é¢ã®[Orientation](https://api.flutter.dev/flutter/widgets/Orientation-class.html)ã‚’è¸ã¾ãˆãŸä¸Šã§ç«¯æœ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æä¾›ã™ã‚‹enum([`BreakpointDevice`](https://github.com/koji-1009/breakpoints_mq/blob/1.1.0/lib/src/breakpoints_enum.dart#L78))ã‚‚è¿½åŠ ã—ã¾ã—ãŸã€‚ã¨ã¯ã„ãˆã€[Orientationã®åˆ¤å®šã¯ç”»é¢ã‚µã‚¤ã‚ºã®ç¸¦ã¨æ¨ªã®ã©ã¡ã‚‰ãŒé•·ã„ã‹](https://github.com/flutter/flutter/blob/2.0.0/packages/flutter/lib/src/widgets/media_query.dart#L370)ã‚’è¦‹ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€å‚è€ƒç¨‹åº¦ã®åˆ©ç”¨ã«ãªã‚‹ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚

enumã®ä¸€æ–‡å­—ç›®ã«æ•°å­—ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€ `lessThan360` ã®ã‚ˆã†ãªenumã«ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã“ã¡ã‚‰ã€ã‚ˆã‚Šè‹±èªçš„ã«è‰¯ã„è¡¨ç¾ãŒã‚ã‹ã‚‹æ–¹ãŒã„ã‚Œã°ã€PRã‚’å‡ºã—ã¦ã„ãŸã ã‘ã‚‹ã¨ã¨ã¦ã‚‚å¬‰ã—ã„ã§ã™ğŸ˜ã€‚

---

breakpointsã®ä½¿ã„æ–¹ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚`breakpoints_mq` ã¯Webå¯¾å¿œã‚‚ã—ã¦ã‚ã‚‹ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸã‚‰ãã®ã¾ã¾è©¦ã›ã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã—ãŸã€‚

ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§ã¯ç”»é¢å›è»¢æ™‚ã«é…ã‚Œã¦ã„ãŸæç”»ãŒã€Webã§ã¯ã™ãã«åæ˜ ã•ã‚Œã‚‹å°è±¡ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ãŸã‚ã€Webã‚„Desktopã¸ã®å±•é–‹ã‚’è€ƒãˆã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€æ—©ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç”»é¢ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’é€²ã‚ã¦ãŠã„ãŸæ–¹ãŒè‰¯ã•ãã†ã§ã™ã€‚

:::details ã•ã•ã£ã¨ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã„äººå‘ã‘

```dart
import 'package:flutter/material.dart';
import 'package:breakpoints_mq/breakpoints_mq.dart';

class HomePage extends StatelessWidget {
  const HomePage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final data = MediaQuery.of(context);
    final breakpoint = data.breakpoint; <- ã“ã“ã§å–å¾—

    return Scaffold(
        appBar: AppBar(
          title: const Text('Breakpoints Demo'),
        ),
        body: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Padding(
              padding: const EdgeInsets.all(8),
              child: Text('Screen Size: ${data.size.toString()}'),
            ),
            Padding(
              padding: const EdgeInsets.all(8),
              child: Text('Breakpoint: ${breakpoint.toString()}'),
            ),
            Expanded(
              child: Padding(
                padding: EdgeInsets.symmetric(horizontal: breakpoint.margins / 2), <- breakpointsã«è¨˜è¼‰ã•ã‚Œã¦ã„ãŸmargins
                child: GridView.count(
                  crossAxisCount: breakpoint.columns, <- breakpointsã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚°ãƒªãƒƒãƒ‰ã®æ•°
                  children: List.generate(
                    100,
                    (index) => Padding(
                      padding: EdgeInsets.all(breakpoint.gutters / 2), <- breakpointsã«è¨˜è¼‰ã•ã‚Œã¦ã„ãŸgutters
                      child: Card(
                        child: Center(
                          child: Text('No.${index + 1}'),
                        ),
                      ),
                    ),
                  ),
                ),
              ),
            )
          ],
        ));
  }
}
```

:::

---

ãªãŠã€ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ã®iOS breakpointsã¯ã©ã†å®Ÿè£…ã™ã‚Œã°ã„ã„ã®ã‹ã€åˆ¤æ–­ã«å›°ã‚‹ã‚‚ã®ã«ãªã£ã¦ã„ã¾ã™ã€‚Flutterã‚¢ãƒ—ãƒªã®å ´åˆã¯[device_info](https://pub.dev/packages/device_info)ã‹ã‚‰å–å¾—ã—ãŸ `utsname.machine` ã‚’è‰²ã€…ã¨é ‘å¼µã£ã¦åˆ¤å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã€ã‚ã¾ã‚Šæ·±å €ã—ãªã„æ–¹ãŒè‰¯ã„ã®ã§ã¯ãªã„ã‹ãªã¨ã€‚
æ¥å¹´ã‚ãŸã‚Šã«ã¯ã€ã“ã®è¾ºã‚Šã®çŸ¥è¦‹ã‚‚ã„ã‚ã„ã‚ãªã¨ã“ã‚ã§å…±æœ‰ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚æ¥½ã—ã¿ã§ã™ã€‚

---

2022.03.20è¿½è¨˜

Flutter Webã®ã‚ˆã†ãªåºƒã„ç”»é¢ã«å¯¾å¿œã™ã‚‹å ´åˆã€ç”»é¢ã‚’æ¨ªã«åˆ†å‰²ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ã¾ã™ã€‚
ãã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€`MediaQuery.of(context)`ã«ã‚ˆã‚‹ã€Œç”»é¢ã‚µã‚¤ã‚ºã€ã®å–å¾—ã§ã¯ãªãã€`LayoutBuilder.build`ã«ã‚ˆã‚‹`BoxConstraints`ã®å–å¾—ãŒé©ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã“ã®ãŸã‚ã€`BoxConstraints`ã‹ã‚‰`Breakpoint`ã‚’å–å¾—ã™ã‚‹extensionã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

ã¾ãŸã€ãŸã„ã¦ã„ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€ŒBreakpointã«å¿œã˜ãŸPaddingã‚’ã€è¦ç´ ã®è¦ªã«è¿½åŠ ã™ã‚‹ã€å‡¦ç†ã«ãªã‚‹å¦¥å½“ã¨æ€ã£ãŸã®ã§ã€`BreakpointWidget`ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
ã“ã¡ã‚‰ã¯`BreakpointWidget`ã®`child`ã«æŒ‡å®šã—ãŸWidgetã«å¯¾ã—ã¦ã€Widgetã®æ¨ªå¹…ã‹ã‚‰ç®—å‡ºã—ãŸPaddingã‚’è‡ªå‹•çš„ã«è¿½åŠ ã™ã‚‹ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚ã‚ˆã‘ã‚Œã°ã”åˆ©ç”¨ãã ã•ã„ã€‚

[^1]: ãã®ã»ã‹ã«ã‚‚è‰²ã€…ã¨ã‚ã‚Šã¾ã™ãŒã€æ®†ã©ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã›ã‚“
[^2]: å®Ÿè£…ãŒéå‰°ã ã£ãŸã‚Šå†—é•·ã ãªã¨æ€ã£ãŸã®ãŒã€ä»Šå›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ–°ãŸã«ä½œæˆã—ãŸä¸»ãªç†ç”±ã§ã™